<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="keywords" content="杨小福,yangxiaofu,前端,编程,html,css,javascript,nodeJS">
    <meta name="description" content="杨小福的博客，记点笔记">
    <title>
         杨小福|Nerver stop thinking 
    </title>
    <link rel="stylesheet" href="/css/public.css">
    <link rel="stylesheet" href="/css/page.css">
    <link rel="stylesheet" href="/css/monokai.min.css">
    <link rel="stylesheet" href="/css/post_add.css">
    <link id="theme-highlight" rel="stylesheet" href="//cdn.bootcss.com/highlight.js/8.9.1/styles/atelier-dune.light.min.css">
    <script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?0904845f91ea208faa55eaa72f93fab1";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
    </script>
</head>

<body>
    <div id="headerWrapper" class="cf">
        <header id="header" class="cf">
            <div id="logo">
                <h1 class="logo">
					<a href="/">Yangxiaofu</a>
				</h1>
                <div class="logo-subtitle">
                    programmer
                </div>
            </div>
            <nav id="main-nav">
                <ul>
                    <li><a href="/">Home</a></li>
                    <li><a href="/archives">Posts</a></li>
                    <li><a href="/websites/index.html">Nav</a></li>
                    <li><a href="/Lab">Lab</a></li>
                    <li><a href="/about">About</a></li>
                </ul>
            </nav>
        </header>
    </div>
    
	<div id="pageWrapper">
		<div id="mainContent">
			<article class="post">
			<div class="items-wrap">
				
				
				 	
				
				 	
				
				 	
				
				 	
				
				 	
				
				 	
				
				 	
				
				 	
				
				 	
				
				 	
				
				 	
				
				 	
				
				 	
				
				 	
				
				 	
				
				 	
				
				 	
				
				 	
				
				 	
				
				 	
				 	<div class="post-item">	
						<header>
							<h1>
								<a href="/2016/01/25/js/closure-this/" target="_blank">javascript 闭包、this</a>
							</h1>
							<div class="post-info">
								<span class="post-time">
									<a class="permalink" href="" >2016-01-25</a>
								</span>
								<span class="post-tag">
									
									
										<a class="tag" href="http://www.yangxiaofu.com/tags/js/" target="_blank">js</a>
									
										<a class="tag" href="http://www.yangxiaofu.com/tags/pl/" target="_blank">pl</a>
									
								</span>
							</div>
						</header>
						<div class="post-body">
							
								<blockquote>
<p>闭包其实很好理解，但是由于经常把this和闭包绑在一起，从而加大了理解的难度，如果将他们分开考虑，那就清晰多了。</p>
</blockquote>
<h2 id="闭包">闭包</h2><p>闭包并不是js首创，在许多语言中都支持闭包，如schemer、ruby等。如果没有闭包，像js这样的支持高阶函数特性的语言将是一个噩梦。</p>
<ul>
<li>静态作用域</li>
<li>动态作用域</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">"xiaofu"</span>;</span><br><span class="line"><span class="keyword">var</span> person = <span class="function"><span class="keyword">function</span>(<span class="params">lastname</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> name = <span class="string">'yang'</span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">personName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name + lastname;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> personName;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> pName = person();</span><br><span class="line">pName(<span class="string">"xiaoming"</span>);</span><br></pre></td></tr></table></figure>
<p>js是函数作用域的，即一个function就是一个作用域，所以personName在person这个函数的作用域里面。但是调用的是在这个作用域的外面，那么当personName执行的时候，它里面的name取的是person这个作用域还是最外层的作用域呢？</p>
<p>如果是静态作用域则调用的是person里面的 name, 如果是动态作用域则调用的是外层的name(“xiaofu”);而不是”yang”。</p>
<p>而闭包就是用来实现静态作用域的一种方式，即通过闭包将函数和它声明时的作用域保存下来，这样在调用的时候取到的就是声明时所在的作用域而不是调用时的作用域。</p>
<h2 id="this">this</h2><p>this则与变量有点不同，即this采用的是类似于动态作用域的情况。js里面一切都是对象，所以函数也都是某个对象的方法，如果没有显示指定则是全局对象。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">	fullname: <span class="function"><span class="keyword">function</span></span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">	&#125;,</span><br><span class="line">	printAge: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">person.fullname();		<span class="comment">//this指向person</span></span><br><span class="line"><span class="keyword">var</span> age = person.printAge;</span><br><span class="line">age();					<span class="comment">//this指向window(浏览器中)</span></span><br></pre></td></tr></table></figure>
<p>将person.printAge赋值给age之后，再执行age(),此时age没有显示指定调用对象则默认是window(浏览器环境)。所以this并不是声明所在的环境。</p>
<h2 id="箭头函数（es6)">箭头函数（es6)</h2><p>es6中新增了箭头函数，箭头函数与通过function声明的函数不同，它的this是使用的声明时上下文中的this.并且不可通过apply, call等改变。</p>

							
						</div>
						<hr>
						</div>
				 	
				
				 	
				
				 	
				
				 	
				
				 	
				
				 	
				
				 	
				
				 	
				 	<div class="post-item">	
						<header>
							<h1>
								<a href="/2015/11/17/html语法标准/" target="_blank">html不能这么写，你知道吗？</a>
							</h1>
							<div class="post-info">
								<span class="post-time">
									<a class="permalink" href="" >2015-11-17</a>
								</span>
								<span class="post-tag">
									
									
										<a class="tag" href="http://www.yangxiaofu.com/tags/html/" target="_blank">html</a>
									
								</span>
							</div>
						</header>
						<div class="post-body">
							
								<div class="post-excerpt">
									<ul>
<li>a标签不可以嵌套交互式元素</li>
<li>块级元素可以包含内联元素和某些块级元素，内联元素不能包含块级元素，只能包含内联元素</li>
<li>p标签不能包含块级元素</li>
<li>这些标签不可包含块级元素</li>
<li>li标签可以包含div以及ul，ul的子元素应该只有li</li>
<li>元素并排（块级和块级并列，内联和内联并列)</li>
</ul>
								</div>
								<div class="post-more">
									<h2 id="标签错误嵌套">标签错误嵌套</h2><h3 id="语法错误">语法错误</h3><ul>
<li>a标签不可以嵌套交互式元素[a， audio（如果设置了controls属性）， button， details， embed， iframe， img（如果设置了usemap属性）， input（如果type属性不为hidden状态）， keygen， label， menu（如果type属性为toolbar状态），object（如果设置了usemap属性）， select， textarea， video（如果设置了controls属性）]</li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">/*下面这些写法浏览器是不能够正常解析的*/</span><br><span class="line">&lt;a href=""&gt;</span><br><span class="line">	&lt;a href=""&gt;click&lt;/a&gt;</span><br><span class="line">&lt;/a&gt;</span><br><span class="line">&lt;a href=""&gt;</span><br><span class="line">	&lt;button&gt;click&lt;/button&gt;</span><br><span class="line">&lt;/a&gt;</span><br><span class="line">&lt;a href=""&gt;</span><br><span class="line">	&lt;input type="text"&gt;</span><br><span class="line">&lt;/a&gt;</span><br><span class="line">&lt;a href=""&gt;</span><br><span class="line">	&lt;textarea name="" id="" cols="10" rows="5"&gt;&lt;/textarea&gt;</span><br><span class="line">&lt;/a&gt;</span><br></pre></td></tr></table></figure>
<p><a href=""><a href="">click</a></a><a href=""><button>click</button></a><a href=""><input type="text"></a><a href=""><textarea name="" id="" cols="30" rows="10"></textarea></a></p>
<p>有的虽然解析正常，但却达不到预想的目的</p>
<h3 id="语义错误">语义错误</h3><p>页面可能正常解析，但不符合语义。这是因为浏览器自带容错机制，对于不规范的写法也能够正确的解析，各浏览器的容错机制不同，所以尽量按规范来写。</p>
<ul>
<li>块级元素可以包含内联元素和某些块级元素，内联元素不能包含块级元素，只能包含内联元素</li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">/*规范的写法*/</span><br><span class="line">&lt;div&gt;</span><br><span class="line">	&lt;h2&gt;jikexueyuan&lt;/h2&gt;</span><br><span class="line">	&lt;p&gt;IT education&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">/*不规范的写法*/</span><br><span class="line">&lt;span&gt;</span><br><span class="line">	&lt;div&gt;wrong&lt;/div&gt;</span><br><span class="line">&lt;/span&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>p标签不能包含块级元素</li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">/*不规范的写法*/</span><br><span class="line">&lt;p&gt;</span><br><span class="line">	&lt;h1&gt;&lt;/h1&gt;</span><br><span class="line">&lt;/p&gt;</span><br><span class="line">&lt;p&gt;</span><br><span class="line">	&lt;div&gt;&lt;/div&gt;</span><br><span class="line">&lt;/p&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>如下的标签不可包含块级元素</li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">h1、h2、h3、h4、h5、h6、p</span><br><span class="line"></span><br><span class="line">/*不规范的写法*/</span><br><span class="line">&lt;h1&gt;</span><br><span class="line">	&lt;h2&gt;&lt;/h2&gt;</span><br><span class="line">&lt;/h1&gt;</span><br><span class="line">&lt;h2&gt;</span><br><span class="line">	&lt;p&gt;&lt;/p&gt;</span><br><span class="line">&lt;/h2&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>li标签可以包含div以及ul(这个是不是很牛，可以包含父级元素)</li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">/*规范的写法*/</span><br><span class="line">&lt;li&gt;</span><br><span class="line">	&lt;ul&gt;</span><br><span class="line">		&lt;li&gt;&lt;/li&gt;</span><br><span class="line">		&lt;li&gt;&lt;/li&gt;</span><br><span class="line">		&lt;li&gt;&lt;/li&gt;</span><br><span class="line">	&lt;/ul&gt;</span><br><span class="line">	&lt;div&gt;&lt;/div&gt;</span><br><span class="line">&lt;/li&gt;</span><br><span class="line">/*不规范的写法*/</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">	&lt;a href=""&gt;迷路的a标签&lt;/a&gt;</span><br><span class="line">	&lt;li&gt;&lt;/li&gt;</span><br><span class="line">	&lt;li&gt;&lt;/li&gt;</span><br><span class="line">	&lt;li&gt;&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>元素并排（块级和块级并列，内联和内联并列)</li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">/*规范的写法*/</span><br><span class="line">&lt;div&gt;</span><br><span class="line">	&lt;h2&gt;&lt;/h2&gt;</span><br><span class="line">	&lt;p&gt;&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">	&lt;img src="" alt=""&gt;</span><br><span class="line">	&lt;a href=""&gt;&lt;/a&gt;</span><br><span class="line">	&lt;span&gt;&lt;/span&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">/*不规范的写法*/</span><br><span class="line">&lt;div&gt;</span><br><span class="line">	&lt;span&gt;我是内联元素&lt;/span&gt;</span><br><span class="line">	&lt;p&gt;我是块级元素&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>如有错误，请指出，欢迎补充其它一些错误情况。</p>
								</div>
								<a class="postMore" href="javascript:void(0);" data-show="false">......查看全文</a>
							
						</div>
						<hr>
						</div>
				 	
				
				 	
				
				 	
				
				 	
				
				 	
				
				</div>
				<p class="text-center">
					<a id="look_more" class="warning-btn" href="/archives">查看更多</a>
				</p>
			</article>
		</div>
	</div>

    <footer id="footer">
        <i id="upToTop"></i>
        <p>
            联系方式 <span>|</span> <a href="javascript:void(0);">yangxiaofuPL@163.com</a>
        </p>
    </footer>
    <script src="//cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>
    <script src="/js/highlight.min.js"></script>
    <script src="/js/post.js"></script>
    <script>
    $(document).ready(function() {
        $('.highlight').each(function(i, block) {
            hljs.highlightBlock(block);
        });
    });
    </script>
</body>

</html>
